

# 로또프로그램 간단한 코드 및 주석! 

package com.example.lottoexample0515



import androidx.appcompat.app.AppCompatActivity

import android.os.Bundle

import android.widget.Button

import android.widget.EditText

import android.widget.TextView

import android.widget.Toast

import com.android.volley.Request

import com.android.volley.toolbox.StringRequest

import com.android.volley.toolbox.Volley

import org.json.JSONObject



class MainActivity : AppCompatActivity() {



override fun onCreate(savedInstanceState: Bundle?) {

super.onCreate(savedInstanceState)

setContentView(R.layout.activity_main)



val queue=Volley.newRequestQueue(applicationContext)



val etNum:EditText=findViewById(R.id.etNum)          //회차적기

val btnSearch:Button=findViewById(R.id.btnSearch) //제출

val tvCnt:TextView=findViewById(R.id.tvCnt)             // 회차

val tvNumber:TextView=findViewById(R.id.tvNumber) //로또번호 

val tvBonus:TextView=findViewById(R.id.tvBonus)      //보너스번호 





btnSearch.setOnClickListener {   // 버튼을 눌렀을경우!

val cnt= etNum.text.toString()    //여기서는 etNum을 사용자가 입력한 회차로 바꿔서 넣어줍니다.

val url="https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=$cnt"  

// $를 통해 또한 마찬가지로 cnt변수에 담아준 사용자가 입력한 회차를 뒤 api Url에 담아주었습니다.



//번호 6가지만 담아오면 되기에 setOnClickListener에서 다 정리를 해주었습니다. 

val request=StringRequest(

Request.Method.GET,

url,

{val json1=JSONObject(it)

val drwtNo1=json1.getString("drwtNo1")

val drwtNo2=json1.getString("drwtNo2")

val drwtNo3=json1.getString("drwtNo3")

val drwtNo4=json1.getString("drwtNo4")

val drwtNo5=json1.getString("drwtNo5")

val drwtNo6=json1.getString("drwtNo6")

val bnusNo=json1.getString("bnusNo")

tvCnt.text="$cnt 회차 로또 번호"

tvNumber.text="$drwtNo1,$drwtNo2,$drwtNo3,$drwtNo4,$drwtNo5,$drwtNo6"

tvBonus.text="보너스 $bnusNo"

},

{

Toast.makeText(this@MainActivity,"실패",Toast.LENGTH_SHORT).show()

}

)

request.setShouldCache(false)

//캐시메모리 정리를 해주고

queue.add(request)

//requestQueue에 Request를 담아서 보내주는 형식으로 끝맺음을 했습니다. 

}

}

